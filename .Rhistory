upper_bound_cp2 <- quantile(db_mun$proporcionareaexpansion, upper_bound_cp2, na.rm=T)
upper_bound_cp2
upper_bound_cp3 <- quantile(db_mun$proporcionareaexpansion, upper_bound_cp3, na.rm=T)
upper_bound_cp3
upper_bound_cp4 <- quantile(db_mun$proporcionareaexpansion, upper_bound_cp4, na.rm=T)
upper_bound_cp4
upper_bound_cp5 <- quantile(db_mun$proporcionareaexpansion, upper_bound_cp5, na.rm=T)
upper_bound_cp5
db_mun <- db_mun %>%
mutate(cp1 = if_else( proporcionareaexpansion <= upper_bound_cp1, 1, 0))
db_mun <- db_mun %>%
mutate(cp2 = if_else( proporcionareaexpansion <= upper_bound_cp2, 1, 0))
db_mun <- db_mun %>%
mutate(cp2 = if_else( proporcionareaexpansion > upper_bound_cp1, 1, 0))
db_mun <- db_mun %>%
mutate(cp3 = if_else( proporcionareaexpansion <= upper_bound_cp3, 1, 0))
db_mun <- db_mun %>%
mutate(cp3 = if_else( proporcionareaexpansion > upper_bound_cp2, 1, 0))
db_mun <- db_mun %>%
mutate(cp4 = if_else( proporcionareaexpansion <= upper_bound_cp4, 1, 0))
db_mun <- db_mun %>%
mutate(cp4 = if_else( proporcionareaexpansion > upper_bound_cp3, 1, 0))
db_mun <- db_mun %>%
mutate(cp5= if_else( proporcionareaexpansion <= upper_bound_cp5, 1, 0))
db_mun <- db_mun %>%
mutate(cp5 = if_else( proporcionareaexpansion > upper_bound_cp4, 1, 0))
colorcp <- rep(NA, nrow(db_mun))
colorcp[db_mun$cp1 == 1] <- "#CAF0F8"
colorcp[db_mun$cp2 == 1] <- "#90E0EF"
colorcp[db_mun$cp3 == 1] <- "#00B4D8"
colorcp[db_mun$cp4 == 1] <- "#0077B6"
colorcp[db_mun$cp5 == 1] <- "#03045E"  #el mas oscuro es el que mas crecio en area de expansion
#MAPA 1
leaflet() %>% addTiles() %>% addCircleMarkers(
data=coord_vis, color= "black", fillOpacity=1 , opacity=1, radius=1) %>% addPolygons(
data= db_mun, color= colorcp, fillOpacity=0.5, opacity = 0.5)
#### Ahora en el mapa 2 veremos los municipios con mayor proporcion de VIS por cada 10mil habitantes
summary (db_mun$VIS10MIL)
upper_bound_c1<-0.2
upper_bound_c2<-0.4
upper_bound_c3<-0.6
upper_bound_c4<-0.8
upper_bound_c5<-1
upper_bound_c1 <- quantile(db_mun$VIS10MIL, upper_bound_c1, na.rm=T)
upper_bound_c1
upper_bound_c2 <- quantile(db_mun$VIS10MIL, upper_bound_c2, na.rm=T)
upper_bound_c2
upper_bound_c3 <- quantile(db_mun$VIS10MIL, upper_bound_c3, na.rm=T)
upper_bound_c3
upper_bound_c4 <- quantile(db_mun$VIS10MIL, upper_bound_c4, na.rm=T)
upper_bound_c4
upper_bound_c5 <- quantile(db_mun$VIS10MIL, upper_bound_c5, na.rm=T)
upper_bound_c5
db_mun <- db_mun %>%
mutate(c1 = if_else( VIS10MIL <= upper_bound_c1, 1, 0))
db_mun <- db_mun %>%
mutate(c2 = if_else( VIS10MIL <= upper_bound_c2, 1, 0))
db_mun <- db_mun %>%
mutate(c2 = if_else( VIS10MIL > upper_bound_c1, 1, 0))
db_mun <- db_mun %>%
mutate(c3 = if_else( VIS10MIL <= upper_bound_c3, 1, 0))
db_mun <- db_mun %>%
mutate(c3 = if_else( VIS10MIL > upper_bound_c2, 1, 0))
db_mun <- db_mun %>%
mutate(c4 = if_else( VIS10MIL <= upper_bound_c4, 1, 0))
db_mun <- db_mun %>%
mutate(c4 = if_else( VIS10MIL > upper_bound_c3, 1, 0))
db_mun <- db_mun %>%
mutate(c5= if_else( VIS10MIL <= upper_bound_c5, 1, 0))
db_mun <- db_mun %>%
mutate(c5 = if_else( VIS10MIL > upper_bound_c4, 1, 0))
colorc <- rep(NA, nrow(db_mun))
colorc[db_mun$c1 == 1] <- "#FF9B54"
colorc[db_mun$c2 == 1] <- "#FF7F51"
colorc[db_mun$c3 == 1] <- "#CE4257"
colorc[db_mun$c4 == 1] <- "#720026"
colorc[db_mun$c5 == 1] <- "#4F000B"  #el mas oscuro es el que mas tiene VIS por cada 10 mil hab
#MAPA 2
leaflet() %>% addTiles() %>% addCircleMarkers(
data=coord_vis, color= "black", fillOpacity=1 , opacity=1, radius=1) %>% addPolygons(
data= db_mun, color= colorc, fillOpacity=0.5, opacity = 0.5)
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun, color= "black", fillOpacity=1 , opacity=1, radius=1)
db_mun$centroid <- st_centroid(db_mun$geometry)
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "black", fillOpacity=1 , opacity=1, radius=1)
radiusc <- rep(NA, nrow(db_mun))
upper_bound_c5
upper_bound_c2
radiusc[db_mun$c1 == 1] <- 1
radiusc[db_mun$c2 == 1] <- 2
radiusc[db_mun$c3 == 1] <- 3
radiusc[db_mun$c4 == 1] <- 4
radiusc[db_mun$c5 == 1] <- 5
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "black", fillOpacity=1 , opacity=1, radius=radiusc)
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=1 , opacity=1, radius=radiusc)
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "#00B4D8", fillOpacity=1 , opacity=1, radius=radiusc)
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=1, radius=radiusc)
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
radiusc <- rep(NA, nrow(db_mun))
radiusc[db_mun$c1 == 1] <- 10
radiusc[db_mun$c2 == 1] <- 20
radiusc[db_mun$c3 == 1] <- 30
radiusc[db_mun$c4 == 1] <- 40
radiusc[db_mun$c5 == 1] <- 50
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
radiusc <- rep(NA, nrow(db_mun))
radiusc[db_mun$c1 == 1] <- 5
radiusc[db_mun$c2 == 1] <- 10
radiusc[db_mun$c3 == 1] <- 15
radiusc[db_mun$c4 == 1] <- 20
radiusc[db_mun$c5 == 1] <- 25
leaflet() %>% addTiles() %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet()  %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
names(providers)
leaflet() %>% addProviderTiles(providers$OpenStreetMap) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$CartoDB.PositronNoLabels) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$JusticeMap.hispanic) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$CartoDB.DarkMatter) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.5 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiusc)
radiusc <- rep(NA, nrow(db_mun))
radiusc[db_mun$c1 == 1] <- 1
radiusc[db_mun$c2 == 1] <- 3
radiusc[db_mun$c3 == 1] <- 5
radiusc[db_mun$c4 == 1] <- 7
radiusc[db_mun$c5 == 1] <- 9
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiusc)
radiusc <- rep(NA, nrow(db_mun))
radiusc[db_mun$c1 == 1] <- 2
radiusc[db_mun$c2 == 1] <- 4
radiusc[db_mun$c3 == 1] <- 6
radiusc[db_mun$c4 == 1] <- 8
radiusc[db_mun$c5 == 1] <- 10
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiusc)
radiuscp <- rep(NA, nrow(db_mun))
radiuscp[db_mun$cp1 == 1] <- 2
radiuscp[db_mun$cp2 == 1] <- 4
radiuscp[db_mun$cp3 == 1] <- 6
radiuscp[db_mun$cp4 == 1] <- 8
radiuscp[db_mun$cp5 == 1] <- 10
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#720026", fillOpacity=0 , opacity=0.8, radius=radiusc)
#vis, rojo
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc)
#vis, rojo
radiuscp <- rep(NA, nrow(db_mun))
radiuscp[db_mun$cp1 == 1] <- 2
radiuscp[db_mun$cp2 == 1] <- 4
radiuscp[db_mun$cp3 == 1] <- 6
radiuscp[db_mun$cp4 == 1] <- 8
radiuscp[db_mun$cp5 == 1] <- 10
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.1, radius=radiuscp) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight= 1) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight= 5) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight = 5)
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
names(providers) #aqui estan los tipos de base que se le pueden poner al mapa
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerNoLabels) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
setwd("C:/Users/Camila Cely/Documents/GitHub/tesis_meca")
#base municipios colombia
mun <-read_sf("stores/Municipios/Municipios.shp")
mun <- st_transform(mun, 4326)
require(pacman)
p_load(tidyverse,
ggplot2,
stargazer,
leaflet,
haven,
ggpubr,
sf,
readxl)
srb <- read_excel('C:/Users/Camila Cely/Documents/MINVIVIENDA/POT 2022/sentencia_bogota_pots.xlsx')
View(srb)
View(srb)
srb <- srb %>% mutate (COD_MUNIC = CODDANE )
View(srb)
mun <- mun %>% mutate (COD_MUNIC= as.numeric (mun$COD_MUNIC))
srb <- srb %>% mutate (COD_MUNIC= as.numeric (srb$COD_MUNIC))
srb_mun <- left_join(srb, mun)
summary(srb_mun)
class(srb_mun)
class(mun)
srb_mun <- st_as_sf (srb_mun)
class(srb_mun)
View(srb)
View(srb_mun)
View(srb)
summary (srb_mun$ESTADO)
srb_mun <- srb_mun %>%
mutate(act = if_else( ESTADO = "ACTUALIZADO", 1, 0))
rlang::last_error()
require(pacman)
p_load(tidyverse,
ggplot2,
stargazer,
leaflet,
haven,
ggpubr,
sf,
readxl,
dplyr)
srb_mun <- srb_mun %>%
mutate(act = if_else( ESTADO = "ACTUALIZADO", 1, 0))
srb_mun$actualizado <- if_else(srb_mun$srb_mun == ‘ACTUALIZADO’, 1, 0)
srb_mun <- srb_mun %>%
mutate(act = if_else( srb_mun == 'ACTUALIZADO', 1, 0))
new_srb <- srb_mun
new_srb$ESTADO <- factor(new_srb$ESTADO, exclude = NULL)
new_srb <- model.matrix(~.-1, data = new_srb[, c("ESTADO")],
contrasts.arg = list(
city = contrasts(new_srb$ESTADO, contrasts = FALSE))
View(new_srb)
new_srb <- model.matrix(~.-1, data = new_srb[, c("ESTADO")],
contrasts.arg = list(
city = contrasts(new_srb$ESTADO, contrasts = FALSE)))                      ))
new_srb <- model.matrix(~.-1, data = new_srb[, c("ESTADO")],
contrasts.arg = list(
city = contrasts(new_srb$ESTADO, contrasts = FALSE)
))
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= colorc, fillOpacity=0 , opacity=0.8, radius=radiusc)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= colorcp, fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= colorc, fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
radiuscp <- rep(NA, nrow(db_mun))
radiuscp[db_mun$cp1 == 1] <- 10
radiuscp[db_mun$cp2 == 1] <- 12
radiuscp[db_mun$cp3 == 1] <- 14
radiuscp[db_mun$cp4 == 1] <- 16
radiuscp[db_mun$cp5 == 1] <- 18
leaflet() %>% addProviderTiles(providers$Wikimedia) %>% addCircleMarkers(
data= db_mun$centroid, color= colorcp, fillOpacity=0 , opacity=0.8, radius=radiuscp)
#combinado
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= colorcp, fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= colorc, fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
# tamaños para suelo #suelo, azul
radiuscp <- rep(NA, nrow(db_mun))
radiuscp[db_mun$cp1 == 1] <- 2
radiuscp[db_mun$cp2 == 1] <- 4
radiuscp[db_mun$cp3 == 1] <- 6
radiuscp[db_mun$cp4 == 1] <- 8
radiuscp[db_mun$cp5 == 1] <- 10
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.2 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.2 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)  %>% addCircleMarkers(
data=coord_vis, color= "black", fillOpacity=1 , opacity=1, radius=1)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.2 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)  %>% addCircleMarkers(
data=coord_vis, color= "black", fillOpacity=1 , opacity=1, radius=0.5)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.2 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)  %>% addCircleMarkers(
data=coord_vis, color= "black", fillOpacity=0 , opacity=0.8, radius=0.1)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerLabelsUnde) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.2 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
names(providers)
leaflet() %>% addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>% addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.2 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
leaflet() %>%  addCircleMarkers(
data= db_mun$centroid, color= "#0077B6", fillOpacity=0.2 , opacity=0.8, radius=radiuscp, stroke = TRUE, weight=2) %>% addCircleMarkers(
data= db_mun$centroid, color= "#CE4257", fillOpacity=0 , opacity=0.8, radius=radiusc, stroke= TRUE, weight =2)
srb <- read_excel('C:/Users/Camila Cely/Documents/MINVIVIENDA/POT 2022/sentencia_bogota_pots.xlsx')
View(srb)
srb <- srb %>% mutate (COD_MUNIC = CODDANE )
mun <- mun %>% mutate (COD_MUNIC= as.numeric (mun$COD_MUNIC))
srb <- srb %>% mutate (COD_MUNIC= as.numeric (srb$COD_MUNIC))
srb_mun <- left_join(srb, mun)
summary(srb_mun)
summary(mun)
class(srb_mun)
class(mun)
srb_mun <- st_as_sf (srb_mun)
summary (srb_mun$ESTADO)
colorpot <- rep(NA, nrow(db_mun))
colorpot[srb_mun$act == 1] <- "#CAF0F8"
colorpot[srb_mun$med == 1] <- "#90E0EF"
colorpot[srb_mun$des == 1] <- "#00B4D8"
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5)
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE, weight=2)
colorpot <- rep(NA, nrow(db_mun))
colorpot[srb_mun$act == 1] <- "#386641"
colorpot[srb_mun$med == 1] <- "#6A994E"
colorpot[srb_mun$des == 1] <- "#A7C957"
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE, weight=2)
View(srb_mun)
View(srb_mun)
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2, label= MUNICIPIO)
colorpot <- rep(NA, nrow(srb_mun))
colorpot[srb_mun$act == 1] <- "#386641"
colorpot[srb_mun$med == 1] <- "#6A994E"
colorpot[srb_mun$des == 1] <- "#A7C957"
muni <- rep(NA, nrow(srb_mun))
srb_mun <- srb_mun %>% mutate (muni = MUNICIPIO )
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2, label= muni)
colorpot <- rep(NA, nrow(srb_mun))
colorpot[srb_mun$act == 1] <- "#386641"
colorpot[srb_mun$med == 1] <- "#A7C957"
colorpot[srb_mun$des == 1] <- "#FABC3C"
srb_mun <- srb_mun %>% mutate (muni = MUNICIPIO )
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2, label= muni)
colorpot <- rep(NA, nrow(srb_mun))
colorpot[srb_mun$act == 1] <- "#386641"
colorpot[srb_mun$med == 1] <- "#EF8354"
colorpot[srb_mun$des == 1] <- "#FABC3C"
srb_mun <- srb_mun %>% mutate (muni = MUNICIPIO )
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2, label= muni)
colorpot <- rep(NA, nrow(srb_mun))
colorpot[srb_mun$act == 1] <- "#386641"
colorpot[srb_mun$med == 1] <- "#FABC3C"
colorpot[srb_mun$des == 1] <- "#EF8354"
srb_mun <- srb_mun %>% mutate (muni = MUNICIPIO )
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2, label= muni)
colorpot <- rep(NA, nrow(srb_mun))
colorpot[srb_mun$act == 1] <- "#386641"
colorpot[srb_mun$med == 1] <- "#FABC3C"
colorpot[srb_mun$des == 1] <- "#5FAD56"
srb_mun <- srb_mun %>% mutate (muni = MUNICIPIO )
leaflet() %>% addTiles() %>%  addPolygons(
data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2, label= muni)
srb_mun$centroid <- st_centroid(srb_mun$geometry)
View(srb_mun)
summary(srb_mun$centroid)
leaflet() %>% addTiles() %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2) %>% addLabelOnlyMarkers(data = srb_mun,
label = muni,
labelOptions = labelOptions(noHide = TRUE, direction = 'top', textOnly = TRUE))
leaflet() %>% addTiles() %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2) %>% addLabelOnlyMarkers(data = srb_mun,
lng = ~x, lat = ~y, label = muni,
labelOptions = labelOptions(noHide = TRUE, direction = 'top', textOnly = TRUE))
leaflet() %>% addTiles() %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2) %>% addLabelOnlyMarkers(data = srb_mun,
lng = centroid, lat = centroid, label = muni,
labelOptions = labelOptions(noHide = TRUE, direction = 'top', textOnly = TRUE))
centers <- data.frame(gCentroid(srb_mun, byid = TRUE))
centers$mun <- row.names(srb_mun)
library(raster)
library(rgeos)
library(leaflet)
install.packages(rgeos)
centers <- data.frame(gCentroid(srb_mun, byid = TRUE))
library(rgeos)
install.packages(rgeos)
leaflet() %>% addTiles() %>%
addCircleMarkers(data= srb_mun$centroid)
leaflet() %>% addTiles() %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2) %>% addLabelOnlyMarkers(data = srb_mun$centroid,
label = muni,
labelOptions = labelOptions(noHide = TRUE, direction = 'top', textOnly = TRUE))
names(providers)
leaflet() %>%  addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2) %>% addLabelOnlyMarkers(data = srb_mun$centroid,
label = muni,
labelOptions = labelOptions(noHide = TRUE, direction = 'top', textOnly = TRUE))
leaflet(srb_mun) %>% addTiles() %>%
addCircles(lng = ~Long, lat = ~Lat, weight = 1,
radius = ~sqrt(Pop) * 30, label = ~mun,
labelOptions = lapply(1:nrow(srb_mun), function(x) {
labelOptions(opacity = 0.8)
}))
colnames(sbr_mun)
colnames(srb_mun)
head(srb_mun$geometry)
head(srb_mun$centroid)
leaflet() %>%  addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2)
leaflet() %>%  addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>%
addLabelOnlyMarkers(data = srb_mun$centroid,
label = muni,
labelOptions = labelOptions(noHide = TRUE, direction = 'top', textOnly = TRUE))
leaflet() %>% addTiles() %>%
addCircleMarkers(data= srb_mun$centroid)
leaflet(srb_mun) %>%
addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>%
addFeatures(.) %>%
addStaticLabels(., label = srb_mun$mun)
library(leaflet)
leaflet(srb_mun) %>%
addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>%
addFeatures(.) %>%
addStaticLabels(., label = srb_mun$mun)
leaflet() %>%
addTiles() %>%
addLabelOnlyMarkers(
data = srb_mun,
label = as.character(breweries91$mun),
labelOptions = leaflet::labelOptions(
noHide = TRUE,
direction = "bottom",
textOnly = TRUE,
offset = c(0, -10),
opacity = 1
)
)
xx <- unlist(srb_mun$geometry)
long <- xx[seq(1,length(xx),2)]
lat <- xx[-seq(1,length(xx),2)]
st_coordinates(srb_mun)
coord <- st_coordinates(srb_mun)
coord <- st_coordinates(srb_mun$centroid)
long <- coord[seq(1,length(coord),2)]
lat <- coord[-seq(1,length(coord),2)]
leaflet() %>%  addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2)
leaflet(srb_mun) %>% addTiles() %>%
addLabelOnlyMarkers(long, lat, label=muni))
leaflet(srb_mun) %>% addTiles() %>%
addLabelOnlyMarkers(long, lat, label=muni)
lat <- coord[-seq(2,length(coord),2)]
coord <- st_coordinates(srb_mun$centroid)
lat <- coord[seq(2,length(coord),2)]
leaflet() %>%  addProviderTiles(providers$CartoDB.VoyagerNoLabel) %>%
addPolygons(data= srb_mun, color= colorpot, fillOpacity=0.5, opacity = 0.5, stroke = TRUE,
weight=2)
srb_mun$coord <- st_coordinates(srb_mun$centroid)
head(srb_mun$coord)
srb_mun$long <- srb_mun$coord[seq(1,length(coord),2)]
head(srb_mun$long)
head(srb_mun$mun)
head(srb_mun$MUNICIPIO)
srb_mun$lat <- srb_mun$coord[seq(2,length(coord),2)]
head(srb_mun$lat)
srb_mun$lat <- srb_mun$coord[seq(2,length(coord),3)]
srb_mun$lat <- srb_mun$coord[-seq(1,length(coord),2)]
head(srb_mun$lat)
srb_mun$lat <- srb_mun$coord[-(seq(1,length(coord),2))]
head(srb_mun$lat)
srb_mun$lat <- srb_mun$coord[seq(2,length(coord),1)]
srb_mun$lat <- srb_mun$coord[seq(2,length(coord),2)]
head(srb_mun$lat)
leaflet(srb_mun) %>% addTiles() %>%
addLabelOnlyMarkers(srb_mun$coord(X), latsrb_mun$coord(Y), label=muni)
srb_mun <- srb_mun %>% mutate (muni = MUNICIPIO)
head(srb_mun$muni)
